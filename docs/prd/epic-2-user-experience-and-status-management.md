\n# Epic 2: User Experience & Status Management\n\n**Epic Goal:** Transform the basic processing pipeline into a polished, workshop-ready experience with real-time status visibility, configurable processing options (OCR toggle, Fast/Quality modes), comprehensive error handling with actionable messages, and UI refinements that enable workshop attendees to use the tool independently without assistance.\n\n## Story 2.1: Processing Options UI & Backend Integration\n\nAs a **workshop attendee**,\nI want **to select OCR and processing mode options before uploading**,\nso that **I can optimize processing speed vs. quality based on my document type**.\n\n### Acceptance Criteria\n\n1. Upload screen displays two toggle controls: \"Enable OCR\" (checkbox, default off) and \"Processing Mode\" (radio buttons: Fast/Quality, default Fast)\n2. Help text explains each option: OCR (\"Enable for scanned documents or images\"), Fast mode (\"Quick processing, best for clean digital documents\"), Quality mode (\"Thorough analysis, best for complex layouts\")\n3. Selected options included in upload request payload (`processing_options` JSON field)\n4. Backend `/api/upload` endpoint stores processing options in `documents.processing_options` field\n5. Backend `/api/process/{document_id}` retrieves processing options and configures Docling accordingly (OCR on/off, Fast/Quality mode)\n6. Docling processing respects configuration: OCR mode uses optical character recognition, Quality mode performs full layout analysis\n7. Unit tests verify options are correctly passed through upload → storage → processing pipeline\n\n## Story 2.2: Enhanced Status Display & Progress Indicators\n\nAs a **workshop attendee**,\nI want **clear visual feedback showing processing progress and estimated time**,\nso that **I understand what's happening and how long to wait**.\n\n### Acceptance Criteria\n\n1. Processing screen displays animated progress indicator (spinner or progress bar) with current status text: \"Uploading file...\", \"Queued for processing...\", \"Processing document...\", \"Finalizing...\"\n2. Status updates polled every 2 seconds from backend with visual state transitions (no jarring UI jumps)\n3. Estimated time remaining displayed based on processing mode: Fast mode (\"~30 seconds\"), Quality mode with OCR (\"~2 minutes\"), adjusts if processing exceeds estimates\n4. Backend `/api/status/{document_id}` returns enriched response: status, progress_stage (uploading/queued/processing/finalizing), elapsed_time, filename\n5. Visual differentiation between stages: uploading (blue pulse), processing (amber spinner), complete (green checkmark), failed (red error icon)\n6. Processing screen remains responsive on mobile devices with appropriately sized progress indicators\n7. Status polling stops automatically when status reaches 'complete' or 'failed' terminal states\n\n## Story 2.3: Comprehensive Error Handling & Actionable Messages\n\nAs a **workshop attendee**,\nI want **clear error messages that tell me what went wrong and how to fix it**,\nso that **I can resolve issues without asking for help**.\n\n### Acceptance Criteria\n\n1. Error messages displayed in prominent error UI component (red banner or modal) with error icon\n2. File validation errors show specific guidance: \"File too large (15MB) - maximum size is 10MB. Try compressing your PDF or splitting into multiple files\"\n3. Unsupported format errors include allowed formats: \"Cannot process .txt files - supported formats: PDF, DOCX, PPTX, XLSX\"\n4. Processing timeout errors (5+ minutes) display: \"Processing took too long - try enabling Fast mode or reducing document complexity\"\n5. Corrupted file errors suggest: \"Unable to process file - ensure the document isn't password-protected or corrupted\"\n6. Backend service errors (Supabase failures, Docling crashes) show user-friendly message: \"Processing failed due to server error - please try again\" (technical details logged server-side only)\n7. All error states include \"Try Again\" button that resets to upload screen, clearing previous error state\n8. Error logging on backend captures full error details (stack trace, document ID, file metadata) for debugging\n\n## Story 2.4: Download Experience & File Management\n\nAs a **workshop attendee**,\nI want **a streamlined download experience with clear success confirmation**,\nso that **I know my markdown file is ready and correctly named**.\n\n### Acceptance Criteria\n\n1. Success screen displays: green checkmark, \"Processing Complete!\" heading, original filename with `.md` extension preview\n2. Large, prominent \"Download Markdown\" button triggers download with proper content-disposition header (forces download vs. browser display)\n3. Downloaded file uses cleaned filename: preserves original name, replaces `.pdf`/`.docx`/`.pptx`/`.xlsx` with `.md`, removes special characters\n4. Success message includes file size of processed markdown (e.g., \"report.md (45 KB) ready for download\")\n5. \"Process Another Document\" button visible below download button, resets entire UI state to upload screen\n6. Backend `/api/download/{document_id}` endpoint streams file from Supabase `processed` bucket with proper MIME type (`text/markdown`)\n7. Download errors (file not found, storage access failed) display actionable message: \"Download failed - file may have been moved or deleted. Please process document again\"\n\n## Story 2.5: Mobile Responsive UI Refinements\n\nAs a **workshop attendee using a mobile device**,\nI want **the interface to work seamlessly on my phone or tablet**,\nso that **I can process documents even if I don't have a laptop**.\n\n### Acceptance Criteria\n\n1. Upload screen responsive breakpoints: full-width drop zone on mobile (<768px), centered layout on desktop\n2. Processing options (OCR toggle, mode selection) stack vertically on mobile with touch-friendly spacing (minimum 44px tap targets)\n3. Status screen adapts: progress indicator scaled appropriately, status text readable without horizontal scrolling\n4. Download button full-width on mobile, fixed width centered on desktop\n5. Error messages wrap properly on narrow screens without text overflow\n6. Mobile Safari and Chrome tested: drag-and-drop works (if supported) or gracefully falls back to click-to-browse\n7. Responsive typography: base font 16px on mobile (prevents zoom on iOS input focus), scales up to 18px on desktop\n\n## Story 2.6: Integration Testing & Error Scenario Validation\n\nAs a **developer**,\nI want **comprehensive integration tests covering success and failure paths**,\nso that **we have confidence the system handles real-world scenarios reliably**.\n\n### Acceptance Criteria\n\n1. Integration test suite created covering: successful upload → process → download for each file type (PDF, DOCX, PPTX, XLSX)\n2. Processing options validated: Fast mode completes faster than Quality mode, OCR mode handles scanned PDF successfully\n3. Error scenarios tested: oversized file rejection (11MB file), unsupported format rejection (.txt file), corrupted file handling (intentionally corrupted PDF)\n4. Timeout scenario tested: mock Docling processing exceeding 5 minutes triggers failure status with correct error message\n5. Storage failure scenarios: Supabase connection error handled gracefully with user-friendly error message\n6. End-to-end test on staging environment: upload real workshop sample documents (complex PDF with tables, multi-slide PPTX, large Excel spreadsheet)\n7. Test results documented: success rate, processing times (p50, p95), identified edge cases requiring handling in Epic 3\n